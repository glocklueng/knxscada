<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">
	<wicket:head>
		<title>KNX WebApplication</title>
		
		<script type="text/javascript" src="js/jquery-2.0.0.min.js"></script>
		<script type="text/javascript" src="js/jquery-ui.min.js"></script>
		<script type="text/javascript" src="js/websocket.js"></script>
		<script type="text/javascript" src="js/jquery.json-2.4.min.js"></script>
		
		<link rel="stylesheet" href="css/jquery-ui.css" />
		<link rel="stylesheet" href="css/jquery.ui.theme.css" />
		<link type="text/css" rel="stylesheet" href="css/style.css" />
		<link type="text/css" rel="stylesheet" href="css/inputs.css" />
		
		<script type="text/javascript">
				$(document).ready(
					function() {
		
						WebSocketServer.connect("/knxscada-webapp");
						WebSocketServer.setOnMessageFn(onMessage);
						
						//TODO Remove
						$("#main").click(function(e){
							$("#sidebar").toggle("slide", {}, 500);
							
						});
						
// 						$("#modal").click(function(e){
// 							hideModal();
// 						});
						
						$(window).resize(
								function() {
						
									var windowWidth = $(window).width();
									var windowHeight = $(window).height();
										
									var mainMargin = 20;
									var mainPadding = 10;
									var headerHeight = 30;
									var headerPadding = 10;
									var footerHeight = 60;
									
									var newWidth = windowWidth - (mainMargin * 2) - (mainPadding * 2);
									var newHeight = windowHeight - headerHeight - footerHeight - (mainMargin * 2) - (mainPadding * 2) - (headerPadding * 2);
						
									$("#main").css({
										width : newWidth,
										height : newHeight
									});
									
									$("#sidebar").css({
										height : newHeight
									});
								});
						$(window).resize();
					}
				);

				function onMessage(event){
					if (event.data) {						
						var json = $.secureEvalJSON(event.data);
						console.log(json.msg);
					};
				};
				
				
				function showModal(){
					$("#modal").show("scale", {}, 200);
				}
				
				function hideModal(){
					$("#modal").hide("scale", {}, 200);
				}
				
				
		</script>

	</wicket:head>
	<body>
	
		<div id="header" wicket:id="header"></div>
	
		<div id="sidebar" wicket:id="sidebar"></div>
	
		<div id="main" wicket:id="main"></div>
	
		<div id="footer" wicket:id="footer"></div>
		
		
		<div id="modal"></div>
	</body>
</html>